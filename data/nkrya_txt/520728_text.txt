 И. П. Норенков, В. А. Трудоношин, В. Г. Федорук.
 Предлагаются подход и алгоритмы синтеза топологии и распределения трафика в сетях синхронной передачи данных SDH.
 Для решения используется сочетание эвристических и генетических методов.
 Введение
 Сети синхронной цифровой иерархии ( SDH - Synchronous Digital Hierarchy)[ 1 ] являются основой современной высокоскоростной передачи данных с использованием волоконно-оптических линий связи ( ВОЛС).
 Их широко применяют в качестве магистральных каналов передачи данных в территориальных и городских сетях.
 При проектировании сетей SDH в пределах большого города важно обеспечить экономное использование дорогостоящих кабелей ВОЛС и аппаратуры узлов - центров коммутации пакетов, включающих мультиплексоры / демультиплексоры потоков, регенераторы сигналов и др.
 Первой задачей проектирования сети является выбор её топологии - системы линий связи между узлами.
 При решении этой задачи необходимо предусмотреть возможность передачи данных между любой парой узлов сети даже при наличии отказов ( обычно принимаются во внимание одиночные отказы линий связи) и при этом минимизировать финансовые затраты на построение и обслуживание сети.
 Второй задачей является распределение трафика между линиями связи.
 От интенсивности потока данных зависят требования к пропускной способности, а следовательно, и к стоимости аппаратуры, используемой в узлах сети.
 При первоначальном проектировании сети SDH должны совместно решаться обе задачи.
 Для уже существующей сети её модернизация и развитие могут потребовать перераспределения трафика между линиями связи с минимизацией затрат на обновляемое оборудование, т. е. актуальна вторая из рассмотренных задач.
 Задачи определения топологии сетей различного рода и распределения в них трафика относятся к сложным задачам структурного синтеза.
 В статье предлагается подход к решению задач синтеза топологии и распределения трафика для сетей SDH передачи данных.
 Задачи формулируются как задачи оптимизации, для их решения используются элементы эвристических и генетических методов.
 В первой части статьи дана постановка задачи синтеза.
 Далее описываются алгоритмы решения отдельных подзадач, входящих в задачу синтеза одного варианта сети, и предложен генетический метод поиска оптимального варианта.
 Решение задачи выбора топологии сети и распределения трафика проиллюстрировано на тестовом примере.
 Постановка задачи
 Рассматривается следующая основная задача ( задача A).
 Дано:
 множество Y узлов ( вершин) сети, N - число узлов.
 Некоторые пары узлов соединены линиями.
 В общем случае линия состоит из одного или нескольких волоконно-оптических кабелей ёмкостью g волокон ( жил) каждый ( типичными значениями g являются 8, 16, 32, 64, 128);
 трафик, для его задания используется некоторая метрика.
 В рассматриваемой задаче трафик измеряется числом каналов Kl между каждой парой узлов, т. е. задана матрица T трафика, её элемент T есть трафик между узлами i и j;
 матрица C стоимостей аренды ( за оговорённый интервал времени, ниже этот отрезок принят равным одному месяцу) линий между парами узлов, C стоимость аренды одной жилы между узлами i и j;
 стоимость обслуживающего оборудования.
 В данной задаче на каждую жилу нужно две платы оборудования STM - 1, STM - 4 или STM - 16; стоимость одной платы составляет S 1, S 4, S 16 соответственно.
 Необходимо выбрать систему линий между узлами, в которой обеспечивается связь между каждой парой узлов ( непосредственная или через любые промежуточные узлы), в том числе при отказе одной из линий, и определить тип линий таким образом, чтобы общие затраты S на эксплуатацию построенной сети были минимальны при пропускной способности линий, достаточной для реализации заданного матрицей T трафика.
 Общие затраты определяются по формуле
 Числа жил связаны с трафиком соотношениями при этом ent ( x)- значение x, округлённое до ближайшего большего целого числа.
 К использованию STM - 4 прибегают, если K 1 становится больше 1, а STM - 16 применяют, если К 4 1.
 Нужно отметить, что в формулах ( 2) значения трафика T зависят от топологии сети, т. е. отличаются от исходных значений, соответствующих топологии полного графа.
 Общая задача A включает в себя ряд частных задач.
 Во-первых, это задачи синтеза одного варианта сети, т. е. варианта топологии и распределения трафика, с оценкой качества синтезированного варианта.
 К этим задачам относятся:
 выбор исходной топологии - построение остовного дерева на графе сети; исходная топология представлена взвешенным полным графом G = Y, U, U - множество рёбер, соответствующих линиям связи сети, веса рёбер характеризуют стоимость линии;
 дополнение топологии резервными связями;
 построение окончательной топологии ( каркаса сети) и предварительное распределение трафика по линиям каркаса;
 расчёт пропускной способности каналов с учётом возможных неисправностей линий.
 Во-вторых, в общую задачу входит задача выбора оптимального варианта на множестве возможных вариантов сети.
 При этом в качестве целевой функции используется стоимость S, а управляемыми параметрами являются К 1 К 4
 K 16
 Построение дерева графа и дополнение топологии сети резервными связями
 Для построения дерева используются известные алгоритмы, такие как алгоритмы Прима или Краскала [ 2 ].
 Реализованный алгоритм основан на последовательном подключении к подмножеству U вершин полного графа, уже включённых в дерево, очередной вершины из подмножества U вершин, ещё не включённых в дерево.
 Очередной включаемой в дерево вершиной является та, которая находится на минимальном расстоянии от дерева, т. е. в дерево включается ребро U k, l) при условии
 Начало исполнения алгоритма - включение в U двух первых вершин k и l, соответствующих условию
 В сетях SDH обычно предусматривается наличие не менее двух альтернативных путей между каждой парой узлов, что является необходимым условием для сохранения работоспособности сети при однократных неисправностях линий связи.
 Альтернативные пути обеспечиваются, если связать друг с другом концевые узлы топологии, которым соответствуют листья ( висячие вершины) дерева графа.
 Для соединения висячих вершин достаточно построить ещё одно дерево, но уже на графе, включающем только висячие вершины и соединяющие их рёбра.
 После этой процедуры образуется каркас сети, состоящий из рёбер двух построенных деревьев.
 Рёбра, не вошедшие в каркас, будем называть хордами.
 Синтез топологии сети
 Алгоритм синтеза основан на процедуре классификации рёбер графа.
 Рёбрами первого ранга являются рёбра каркаса, полученного после описанной выше процедуры выбора двух деревьев.
 Ребро второго ранга - это хорда ( i, j) такая, что имеются вершина k и рёбра ( i, k) и ( k, j), включённые в каркас.
 Хорда р-го ранга - это хорда ( i, j) такая, что имеются вершина k и рёбра ( i, k) и ( k, j), являющиеся рёбрами ранга меньше p, причём одна из них имеет ранг p - 1.
 Результаты классификации хорд составляют матрицу Q, её элемент <formula>.
 Заполнение матрицы Q происходит по следующему алгоритму.
 Начальные значения элементов матрицы Q нулевые.
 Сначала всем рёбрам ( i, j) каркаса присваивается ранг p = 1, т. е. принимаем <formula>.
 Алгоритм выполняется при последовательном увеличении p до полного заполнения матрицы Q.
 В качестве примера на рис.
 1 приведён полный граф и показано распределение его рёбер по рангам.
 Результаты классификации рёбер используются далее в основной части алгоритма синтеза варианта сети.
 В этой части осуществляется перенос трафика из хорд в рёбра каркаса последовательно в порядке уменьшения ранга, начиная с рёбер высшего ранга и кончая рёбрами ранга 2.
 Перенос происходит по эвристическим правилам ( эвристикам).
 К каждой хорде ( i, j) применяется одна из следующих эвристик ( очевидно, что список эвристик может быть расширен).
 Расчёт требований к пропускной способности каналов с учётом возможных неисправностей линий
 Трафик, заданный матрицей T, нужно обеспечить при условии неисправности одной ( любой) из линий связи сети.
 Следовательно, затраты ( 1) должны быть минимизированы при выполнении этого требования.
 Очевидно, что отказ одной из линий ( обозначим эту линию U потребует перераспределения трафика этой линии на другие маршруты.
 Поэтому здесь возникают две дополнительные задачи.
 Во-первых, нужно выбрать запасной маршрут, по которому следует направить трафик отказавшей линии.
 Во-вторых, необходимо выяснить, насколько увеличится трафик в каждой линии этого маршрута при отказе линии U
 Оптимальное решение первой дополнительной задачи в общем случае потребует перебора большого числа вариантов, поскольку в каркасе для каждой U может быть указано несколько запасных маршрутов.
 Для выбора маршрута целесообразно применить генетический алгоритм с эвристическими критериями, например, использовать маршрут с минимальным числом рёбер или с минимальной стоимостью линий.
 Для решения второй дополнительной задачи нужно располагать сведениями о том, в какие рёбра рассматриваемого запасного маршрута и из каких хорд был перенесён трафик ликвидируемых хорд.
 Эти сведения в виде массивов M определяются в процессе переноса трафика из хорд в рёбра каркаса.
 Массив M включает имена рёбер x трафик которых проходит по линии U каркаса.
 Пусть рассматривается отказ линии U
 Чтобы запасной маршрут справился с возросшим трафиком, нужно предусмотреть изменение пропускной способности линий U, входящих в запасной маршрут.
 Новый трафик линии U оказывается равным суммарному трафику множества <formula>.
 Поясним сказанное на простом примере.
 На рис.
 2 приведён фрагмент сети с четырьмя узлами A, B, C, D и соединяющими их линиями U U U U
 Трафик T некоторой хорды X является транзитным для узлов A, B, C, трафик T хорды X то же, для узлов D, A, B, C.
 Кроме того, T трафик хорды X перенесённый в линии U и U T T
 Поэтому
 В случае отказа линии U имеем
 Таким образом, синтез одного варианта топологии состоит из N N шагов ( процедур), где N число хорд, N число рёбер ранга 1.
 На каждом из первых N шагов трафик очередной хорды переносится в рёбра каркаса, а на каждом из N последующих шагов выполняется корректировка пропускной способности линий запасного маршрута.
 Генетический алгоритм выбора оптимального варианта топологии сети
 Для решения сложных задач структурного синтеза, подобных рассматриваемой задаче синтеза топологии и распределения трафика в сети SDH, целесообразно использовать сочетание эвристических и генетических алгоритмов, реализованное в методе комбинирования эвристик ( HCM - Heuristic Combination Method)[ 3 ].
 При применении HCM к оптимизации структуры сети SDH хромосома формируется из N 1 генов.
 Гены указывают на способ выполнения очередного шага переноса трафика из хорд в рёбра каркаса и способ выбора запасного маршрута.
 Такое указание обеспечивается тем, что значениями генов ( аллелями) являются номера эвристик, выбираемых для выполнения очередного шага.
 После определения в соответствии со значениями генов структуры сети и распределения трафика проводится корректировка пропускной способности каналов и рассчитывается целевая функция.
 Тем самым получен и оценён очередной экземпляр в популяции хромосом в рамках генетического алгоритма.
 Генетический алгоритм включает процедуры генерации начального поколения хромосом, кроссовера / рекомбинации, мутации, селекции.
 При каждом выполнении операций кроссовера и мутации требуется оценка целевой функции генерируемых потомков ( вариантов сети), следовательно, общее число E обращений к процедуре оценки целевой функции будет весьма значительным.
 Одной из проблем генетического поиска является разработка алгоритмов, эффективных как по параметру E, так и по степени приближения к оптимальному решению задачи.
 Собственно применение HCM существенно повышает эффективность поиска по сравнению с использованием постановки задачи, традиционной для генетических методов.
 При традиционной постановке значениями генов являются сами проектные параметры.
 Так, если имеем P = N N генов, каждый ген соответствует трафику между парой узлов i и j, представленному в матрице T, а значением гена является номер линии, в которую перенесён трафик T то пространство поиска характеризуется числом возможных случайно генерируемых вариантов, равным P причём подавляющее большинство вариантов распределения трафика окажется некорректным из-за нарушения ограничений связности маршрутов передачи данных.
 Очевидно, что решение оказывается практически неосуществимым.
 В случае HCM мощность множества возможных вариантов существенно меньше и не превышает <formula>.
 Дополнительно повышению эффективности способствует использование гибридного алгоритма, сочетающего в себе процедуры генетического поиска, основанного на эволюции поколений хромосом, и процедуры локального поиска, выполняемого по отношению к каждому потомку, генерируемому при кроссовере или мутации.
 Результаты численных экспериментов
 В качестве тестового примера была выбрана сеть из 24 узлов.
 Элементы матриц C и T компактно показаны в табл. 1.
 Поскольку эти матрицы симметрические, то достаточно указать лишь одну симметричную часть каждой из матриц.
 Верхняя треугольная матрица табл. 1 относится к матрице C, нижняя треугольная матрица этой таблицы представляет элементы матрицы T.
 Элемент матрицы C в табл. 1 характеризует расстояние между узлами i и j ( в сотнях метров), для перевода расстояния в цену нужно умножить C на 5.
 Приняты следующие цены плат: S 1 = 22, S 4 = 30, S 16 = 60 единиц.
 Поскольку число стоек равно числу узлов, т. е. не зависит от оптимизируемых параметров, то величины S при расчётах не учитывались.
 Результаты решения задачи ( без корректировки пропускной способности линий при отказах) представлены на рис.
 3.
 Толстыми линиями выделено сформированное основное дерево, тонкими линиями - резервное дерево, связывающее висячие вершины.
 В этой задаче оказалось семь рангов ( седьмой ранг имеет ребро ( 6, 9)) при ранжировании рёбер полного дерева.
 Как видно из рисунка, в оптимальном варианте топологии к первоначальному каркасу присоединено три дополнительные линии.
 Был выполнен ряд вариантов синтеза при различных значениях размера популяции и глубины локального поиска.
 В каждом варианте вычисления прекращались после выполнения E = 100000 оценок целевой функции.
 Динамика улучшения целевой функции в трех из десяти выполненных вариантов показана на рис.
 4.
 Там же приведена усреднённая зависимость целевой функции от числа обращений к процедуре вычисления S.
 При генетическом поиске использовалось пять эвристик.
 Интересно сравнить результаты решения задачи обычным эвристическим методом и методом HCM.
 Значения целевой функции S, полученные в случае моноэвристического подхода ( используется единственная эвристика Э, при этом генетический поиск не требуется), даны в табл. 2.
 В то же время, как видно на рис.
 4, генетический метод позволил получить лучшее значение S, равное 8929, при среднем значении S для десяти вариантов, равном 9024.
 Даже после E = 1000 комбинирование эвристик обеспечивает значительно лучшие значения целевой функции ( среднее значение 9915) по сравнению с моноэвристическим подходом.
 Следует отметить, что использование гибридного метода, совмещающего локальный и генетический поиск, позволило достичь меньших погрешностей в определении экстремума целевой функции.
 Заключение
 В статье предложены алгоритмы синтеза сетей SDH передачи данных как заданной топологии, так и топологии, генерируемой в процессе распределения трафика по линиям связи.
 В число алгоритмов входят алгоритмы выбора основного и резервного деревьев, распределения трафика, корректировки требований к пропускной способности сети при одиночных отказах линий связи.
 Основу рассмотренного подхода составляют генетические методы распределения трафика.
 Предложенные постановка задачи и алгоритмы могут быть использованы также при решении задач синтеза сетей в других приложениях и распределения в них материальных, транспортных, информационных потоков.
 Рис. 1.
 Распределение рёбер полного графа по рангам
 Рис. 2.
 Пример к перераспределению потоков при отказе одной из линий связи
 Рис. 3.
 Пример синтезированной сети
 Рис. 4.
 Характер изменения целевой функции при генетическом поиске
